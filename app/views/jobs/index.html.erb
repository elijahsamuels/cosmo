<%# show the jobs based on the current_user.id %>
<h2>All Jobs for <%= current_user.first_name %></h2>

<% if current_user.admin?%>
<%= render partial: '/admins/admin_stats' %>
<% end %>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Location</th>
      <th>Status</th>
      <th>Client</th>
      <th>Team Size</th>
      <th>Delete</th>
    </tr>
  </thead>

  <tbody>

<% @jobs.each.with_index(1) do |job, i| %>
<tr>
  <td><%= i %>. <% job.datetime_for_job_start %></td>
  <td><%= link_to job.city, "https://www.google.com/maps/place/#{job.zip}", target: :_blank %>, <%= job.state %></td>
  <td><%= job.status.titleize %></td>
  <td><%# link_to job.job_users.client, edit_job_path(job.id) %></td>
  <%# binding.pry%>

  <td><%= "client_of_job" %></td>

  <%# list the users associtated with the job. %>
  <%# job.job_users gives us the array of associations  %>
  <%#  take the job_users id and have this be the Find_by id for the User name %>
  <%# Job.find(1).job_users.map(&:user) %>

  <%# Job.find(1).job_users.map(&:user).each { |a| a.admin_id = 2 }  %>
  <%#   %>



  <%# link_to job.client.first_name, edit_job_path(job.id) %></a></td>

  <td><%= link_to "Delete", job_path(job.id), data: { confirm: "Delete Job?"}, method: :delete %></td>

<% end %>
</tr>
  </tbody>
</table>


<%# @job.job_users[0].user %>
  <td><%# link_to job.job_users[0].user.first_name, edit_job_path(job.id) %></td>